function q(a){if("static"!=getComputedStyle(a).position)return a;var b=a.offsetParent||a.parentElement;return b?q(b):a};function r(a,b,d){a=a.width/a.height;return a>b.width/b.height!==d?{width:b.height*a,height:b.height}:{width:b.width,height:b.width/a}}
function u(a,b){var d=getComputedStyle(a).getPropertyValue("object-fit");a={width:a.naturalWidth,height:a.naturalHeight};switch(d){case "cover":return r(a,b,!1);case "contain":return r(a,b,!0);case "fill":return b;case "none":return a;case "scale-down":return b=r(a,b,!0),{width:Math.min(a.width,b.width),height:Math.min(a.height,b.height)};default:throw Error("object-fit: "+d+" not supported");}};function v(a,b,d){b=void 0===b?a.getBoundingClientRect():b;d=void 0===d?u(a,b):d;var c=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div");a=a.cloneNode(!0);a.className="";a.style.cssText="";g.appendChild(a);f.appendChild(g);e.appendChild(f);c.appendChild(e);Object.assign(e.style,{display:"flex",overflow:"hidden",alignItems:"center",justifyContent:"center",width:b.width+"px",height:b.height+"px"});Object.assign(a.style,{display:"block",
width:d.width+"px",height:d.height+"px"});return{o:c,g:e,c:f,i:a}};function w(a){return"cubic-bezier("+a.x1+", "+a.y1+", "+a.x2+", "+a.y2+")"}function x(a,b,d){var c=d*d,e=c*d;return 3*(d-2*c+e)*a+3*(c-e)*b+e};function y(a){var b=a.c,d=a.f,c=a.h,e=a.curve,f=a.styles,g=a.a,h=a.b,m=g+"-crop";g+="-counterScale";c={x:c.width/d.width,y:c.height/d.height};var k={x:1,y:1};d=h?c:k;h=h?k:c;Object.assign(a.g.style,f,{willChange:"transform",animationName:m,animationTimingFunction:"linear",animationFillMode:"forwards"});Object.assign(b.style,f,{willChange:"transform",animationName:g,animationTimingFunction:"linear",animationFillMode:"forwards"});b=a="";for(f=0;20>=f;f++){c=.05*f;var l=x(e.y1,e.y2,c);c=100*x(e.x1,e.x2,
c);k=d.x;k+=l*(h.x-k);var n=d.y;l=n+l*(h.y-n);n=1/k;var p=1/l;a+=c+"% {\n      transform: scale("+k+", "+l+");\n    }";b+=c+"% {\n      transform: scale("+n+", "+p+");\n    }"}return"\n    @keyframes "+m+" {\n      "+a+"\n    }\n\n    @keyframes "+g+" {\n      "+b+"\n    }\n  "};function z(a){var b=a.j,d=a.m,c=a.b,e=a.a+"-scale";d={x:d.width/b.width,y:d.height/b.height};var f={x:1,y:1};b=c?d:f;c=c?f:d;Object.assign(a.element.style,a.styles,{willChange:"transform",animationName:e,animationTimingFunction:w(a.curve),animationFillMode:"forwards"});return"\n    @keyframes "+e+" {\n      from {\n        transform: scale("+b.x+", "+b.y+");\n      }\n\n      to {\n        transform: scale("+c.x+", "+c.y+");\n      }\n    }\n  "};function A(a){var b=a.l,d=a.f,c=a.h,e=a.b,f=a.a+"-translation",g=e?c:d,h=e?d:c,m=h.width-g.width;c=h.height-g.height;d=h.left+(e?0:m/2);h=h.top+(e?0:c/2);m=g.left-(e?m/2:0)-d;e=g.top-(e?c/2:0)-h;Object.assign(a.element.style,a.styles,{position:"absolute",top:h-b.top+"px",left:d-b.left+"px",willChange:"transform",animationName:f,animationTimingFunction:w(a.curve),animationFillMode:"forwards"});return"\n    @keyframes "+f+" {\n      from {\n        transform: translate("+m+"px, "+e+"px);\n      }\n\n      to {\n        transform: translate(0, 0);\n      }\n  "}
;var B={x1:.42,y1:0,x2:.58,y2:1},C=0;function D(a){C+=1;return a+"-"+C+"-"};exports.prepareImageAnimation=function(a){var b=void 0===a.transitionContainer?document.body:a.transitionContainer,d=void 0===a.styleContainer?document.head:a.styleContainer,c=a.srcImg,e=a.targetImg,f=void 0===a.srcImgRect?c.getBoundingClientRect():a.srcImgRect,g=void 0===a.targetImgRect?e.getBoundingClientRect():a.targetImgRect,h=void 0===a.curve?B:a.curve,m=a.styles,k=g.width*g.height>f.width*f.height,l=k?e:c,n=k?g:f;c=k?c:e;f=k?f:g;a=D(void 0===a.keyframesNamespace?"img-transform":a.keyframesNamespace);
e=l==e;c=u(c,f);g=u(l,n);l=v(l,n,g);var p=l.o;k=l.g;var E=l.c;l=l.i;var F=q(b).getBoundingClientRect();k=y({g:k,c:E,f:n,h:f,curve:h,styles:m,a:a,b:e});n=A({element:p,l:F,f:n,h:f,curve:h,styles:m,a:a,b:e});h=z({element:l,j:g,m:c,curve:h,styles:m,a:a,b:e});var t=document.createElement("style");t.textContent=k+h+n;return{applyAnimation:function(){d.appendChild(t);b.appendChild(p)},cleanupAnimation:function(){b.removeChild(p);d.removeChild(t)}}};
